<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script>
    
document.addEventListener('DOMContentLoaded', function () {
    const isLoggedIn = localStorage.getItem('isLoggedIn');
    const userRank = localStorage.getItem('userRank');

    if (!isLoggedIn || !['TEACHER', 'SMT', 'ADMINISTRATOR'].includes(userRank)) {
        alert('You must be logged in to view this page.');
        window.location.href = 'index.html'; // Redirect to login page
    }
});
</script>

    <style>
        body {
            background-color: #dff0d8;
            font-family: Arial, sans-serif;
            font-size: 16px;
        }
        .container {
            max-width: 600px;
            margin-top: 50px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: relative;
        }
        h1 {
            text-align: center;
            color: #3c763d;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .btn-primary {
            background-color: #3c763d;
            border: none;
            width: 100%;
            font-size: 16px;
        }
        .btn-primary:hover {
            background-color: #2e6b2f;
        }
		.btn-secondary {
            background-color: #0275d8;
            border: none;
            width: 100%;
            font-size: 16px;
            margin-top: 10px;
        }
        .btn-secondary:hover {
            background-color: #025aa5;
        }
        .btn-danger {
            background-color: #d9534f;
            border: none;
            width: 100%;
            font-size: 16px;
            margin-top: 10px;
        }
        .btn-danger:hover {
            background-color: #c9302c;
        }
		
		
        .logo {
            display: block;
            margin: 0 auto 20px;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #3c763d;
            text-align: center;
            line-height: 100px;
            font-size: 24px;
            color: white;
            font-weight: bold;
        }
        .conditional-input {
            display: none;
        }
        .app-title {
            text-align: center;
            font-size: 12px;
            color: #3c763d;
            margin-top: 5px;
            font-weight: bold;
            font-family: "Georgia", serif;
        }
        .developer-credit {
            text-align: center;
            font-size: 12px;
            color: #3c763d;
            margin-top: 20px;
            font-style: italic;
            font-family: "Georgia", serif;
        }
        .clear-btn {
            background-color: #d9534f;
            color: white;
            border: none;
            margin-left: 5px;
        }
        .clear-btn:hover {
            background-color: #c9302c;
        }
        .font-adjust-section {
            text-align: center;
            margin-bottom: 15px;
            padding: 10px 0;
            border-top: 1px solid #dcdcdc;
            border-bottom: 1px solid #dcdcdc;
        }
        .font-adjust-section label {
            font-size: 16px;
            color: #3c763d;
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }
        .font-adjust-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .font-btn {
            background-color: #3c763d;
            color: white;
            border: none;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, background-color 0.2s;
        }
        .font-btn:hover {
            background-color: #2e6b2f;
            transform: scale(1.1);
        }
		
		
		
        .gear-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
        }
        .gear-button img {
            width: 30px;
            height: 30px;
        }
        #settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .modal-button {
            width: 100%;
            margin-top: 10px;
        }


		.action-btn {
        background-color: #5bc0de; /* Light blue */
        color: white;
        border: none;
        font-size: 18px;
        font-weight: bold;
        width: 50px;
        text-align: center;
        margin-left: -1px; /* Aligns with the input field */
        border-radius: 0 4px 4px 0; /* Rounded edges only on the right */
    }
    .action-btn:hover {
        background-color: #31b0d5; /* Darker blue */
        color: white;
        transform: scale(1.1); /* Slight zoom effect */
        transition: 0.2s ease-in-out;
    }
		
        .btn-primary:hover, .btn-secondary:hover {
            background-color: #2e6b2f;
        }		
	        .btn-primary, .btn-secondary {
            background-color: #3c763d;
            border: none;
            width: 100%;
            margin-top: 10px;
        }

	
		   .invalid-input {
        border: 2px solid red;
    }

    .error-message {
        color: red;
        font-size: 0.9em;
        display: none;
        margin-top: 5px;
    }

    .error-message.show {
        display: block;
    }
		
.uniform-btn {
    width: 40px; /* Make all buttons the same width */
    height: 40px; /* Make all buttons the same height */
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: auto; /* Push the button to the right */
    text-align: center;
    padding: 0; /* Remove padding for uniform appearance */
    font-size: 16px; /* Adjust font size */
    border-radius: 5px; /* Optional for rounded corners */
}

        .scrolling-text {
            animation: scroll 10s linear infinite;
            white-space: nowrap;
        }
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
		
    </style>





	<style>
    body.fade-out {
        opacity: 0;
        transition: opacity 0.5s ease-out;
    }

    body.fade-in {
        opacity: 0;
        animation: fadeIn 0.5s ease-in forwards;
    }

    @keyframes fadeIn {
        to {
            opacity: 1;
        }
    }
</style>












</head>

<body>
		
<div class="container py-4">
  <div class="gear-container d-flex justify-content-between align-items-center mb-3">
    <span class="gear-label" id="gear-label"></span>
    <button class="gear-button" onclick="openSettings()">
      <img src="https://www.freeiconspng.com/uploads/settings-icon-16.png" alt="Settings">
    </button>
  </div>

  <div class="logo text-center mb-2">HSRMS</div>
  <h1 class="text-center mb-4">Teachers Dashboard</h1>

  <div class="d-grid gap-0.1">
    <button class="btn btn-secondary" onclick="navigateWithFade('exit_records.html')">Student Exit Record</button>
    <button class="btn btn-secondary" onclick="">Edit Student Exit Records</button>

    <button class="btn btn-secondary mt-4" onclick="">Teacher Duty Locations</button>

    <button class="btn btn-secondary mt-4" onclick="">View Student Exit Records</button>

    <button class="btn btn-secondary mt-4" onclick="navigateWithFade('teacher_student_profile.html')">Student Profiles</button>
	
	<button class="btn btn-secondary mt-4" onclick="navigateWithFade('TSBR.html')">Student Behaviour Monitoring</button>
	
	    <button class="btn btn-secondary mt-4" onclick="navigateWithFade('Profile.html')">My Profile</button>
	
	<button class="btn btn-secondary mt-4" onclick="navigateWithFade('property_damage.html')">Report Property Damage</button>

	<button class="btn btn-secondary mt-4" onclick="navigateWithFade('CPS.html')">Classroom Physical Status</button>


	  
  </div>

  <div class="mt-5">
    <button class="btn btn-danger btn-block w-100" onclick="logout()">Logout</button>
  </div>
    </div> 

	
<!-- Settings Modal -->
        <div id="settings-modal" style="display: none;">
            <div class="modal-content">

            <label id="user-nid">NID</label> <!-- Dynamic NID -->
    		<label id="user-name"></label> <!-- Dynamic Name -->

            <br>
            <label>Current Password:</label>
            <label id="current-password"></label> <!-- Fetched password -->

<div class="form-group d-flex align-items-center mt-2">
    <input type="password" id="new-password" class="form-control me-2" placeholder="Update Password">
    <button class="btn btn-primary uniform-btn" onclick="updatePassword()">U</button>
</div>



<div class="form-group d-flex align-items-center mt-2">
    <input type="range" id="font-size-meter" class="form-control-range me-2" min="10" max="30" value="16" oninput="updateFontSizeLabel()">
    <label id="font-size-label" class="me-2">16px</label>
    <button class="btn btn-primary uniform-btn" onclick="applyFontSize()">U</button>
</div>

		<button class="btn btn-secondary" onclick="closeSettings()">Close</button>
		  </div>
        </div>
        </div>

    <div class="developer-credit">Developed by: Mifthah Ahmed</div>

    <script>
	
	

     
        function logout() {
            
              localStorage.removeItem('isLoggedIn');
  localStorage.removeItem('userRank');
  localStorage.removeItem('teacherName');
  localStorage.removeItem('phoneNumber');
            alert('Logged out successfully');
           
            window.location.href = 'index.html'; 
        }


function openSettings() {
    // Get phoneNumber from localStorage
    const phoneNumber = localStorage.getItem('phoneNumber');

    if (!phoneNumber) {
        alert('NID (phoneNumber) is missing from localStorage!');
        return;
    }

    // Set phoneNumber into the label dynamically
    const nidLabel = document.getElementById('user-nid');
    nidLabel.innerText = phoneNumber;
    console.log('NID being used:', phoneNumber);

    // Use phoneNumber for fetch
    fetch(`https://script.google.com/macros/s/AKfycbyWBkpEze8pGgKXdzmWyhCB89WWt6NbZHI3xKSO-eD-fpgfoQPma5esqcyZIE3PRo5H/exec?action=getUserInfo&nid=${phoneNumber}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                document.getElementById('current-password').innerText = data.password; // Set current password
                document.getElementById('settings-modal').style.display = 'block'; // Show modal
            } else {
                alert('Failed to fetch password.');
            }
        })
        .catch(error => console.error('Error fetching password:', error));
}
		
		
        function updatePassword() {
            const nid = document.getElementById('user-nid').innerText; // Get NID
            const newPassword = document.getElementById('new-password').value; // Get new password

            if (newPassword) {
                fetch(`https://script.google.com/macros/s/AKfycbxcif2M0iA6aZS3MB-XUNRg6ifXKFFCNhwly3llzuI-005QEv0BN3mfibBK4uTDvOu8/exec?action=updateUserPassword&nid=${nid}&password=${newPassword}`, {
                    method: 'POST',
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert('Password updated successfully!');
                            document.getElementById('current-password').innerText = newPassword; // Update displayed password
                            document.getElementById('new-password').value = ''; // Clear input
                        } else {
                            alert('Failed to update password.');
                        }
                    })
                    .catch(error => console.error('Error updating password:', error));
            } else {
                alert('Please enter a new password.');
            }
        }


        function closeSettings() {
            document.getElementById('settings-modal').style.display = 'none';
        }

		
	
		
		

   // Function to update the font size label dynamically
    function updateFontSizeLabel() {
        const fontSizeMeter = document.getElementById('font-size-meter');
        const fontSizeLabel = document.getElementById('font-size-label');
        fontSizeLabel.textContent = `${fontSizeMeter.value}px`;
    }

    // Function to apply the selected font size to the whole website
    function applyFontSize() {
        const fontSizeMeter = document.getElementById('font-size-meter');
        const newFontSize = `${fontSizeMeter.value}px`;
        document.documentElement.style.fontSize = newFontSize; // Update the root font size
        alert(`Font size updated to ${newFontSize}`);
    }

    // Save the font size setting and apply it on page load
    document.addEventListener('DOMContentLoaded', () => {
        const savedFontSize = localStorage.getItem('websiteFontSize');
        if (savedFontSize) {
            document.documentElement.style.fontSize = savedFontSize;
            document.getElementById('font-size-meter').value = parseInt(savedFontSize, 10);
            document.getElementById('font-size-label').textContent = savedFontSize;
        }
    });

    function saveFontSizeSetting() {
        const fontSizeMeter = document.getElementById('font-size-meter');
        const newFontSize = `${fontSizeMeter.value}px`;
        localStorage.setItem('websiteFontSize', newFontSize); // Save to local storage
    }

    // Update and save the font size when the user clicks 'U' button
    function applyFontSize() {
        const fontSizeMeter = document.getElementById('font-size-meter');
        const newFontSize = `${fontSizeMeter.value}px`;
        document.documentElement.style.fontSize = newFontSize; // Update the root font size
        saveFontSizeSetting(); // Save the setting to local storage
        alert(`Font size updated to ${newFontSize}`);
    }




		
		
    </script>


<script>
    // When the page loads, fade in
    document.addEventListener("DOMContentLoaded", () => {
        document.body.classList.add("fade-in");
    });

    // Smooth navigation handler
    function navigateWithFade(url) {
        document.body.classList.remove("fade-in");
        document.body.classList.add("fade-out");

        setTimeout(() => {
            window.location.href = url;
        }, 500); // Match the transition time
    }
</script>






</body>

</html>
